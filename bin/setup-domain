#!/bin/bash

# Function to update the hosts file for custom domain
setup_hosts_file() {
  local domain=$1
  local ip="127.0.0.1"
  if ! grep -q "$domain" /etc/hosts; then
    echo "$ip $domain" | sudo tee -a /etc/hosts > /dev/null
    echo "Custom domain $domain added to /etc/hosts"
  else
    echo "Custom domain $domain already exists in /etc/hosts"
  fi
}

# Load environment variables from compose/.env if it exists
if [ -f compose/.env ]; then
  set -a
  source compose/.env
  set +a
fi

# Update the hosts file with the custom domain
setup_hosts_file "$APP_URL"

echo "Custom domain setup complete."